md-toolbar(layout='row').md-whiteframe-z
  .md-toolbar-tools
    md-button.md-icon-button.hide-gt-sm(ng-click="app.toggleSidenav()")
      md-icon(aria-label='Menu') menu
    h1 {{app.state.current.data.title}}
    span(flex='')

    md-button {{app.fbUser.name}}
    md-select.md-no-underline(ng-model='app.selectedChapter', ng-change="app.selectChapter()", aria-label='Select default chapter')
      md-option(ng-repeat="(id, chapter) in app.user.chapters", value='{{id}}') {{chapter.name}}
      // TODO Add only if user has admin role
      md-option(value='admin', ng-if="app.user.roles.admin") Admin
    md-button(auth-logout-link) Log Out

div(layout='row', flex='')
  md-sidenav.md-sidenav-left.md-whiteframe-z2(layout='column', md-component-id='left', md-is-locked-open="$mdMedia('gt-sm')")
    md-list
      md-list-item(ng-repeat='item in app.menu', class='menu-item')
        md-item-content(ui-sref="{{item.link}}", md-ink-ripple='rgba(0,0,0,0.87)', layout='row', layout-align='start center', ui-sref-active="active")
          .inset
            md-icon(md-svg-icon='mdi:{{item.icon}}')
          .inset.menu-item-title {{item.title}}

  #content(layout='column', flex)
    md-content.md-padding(layout='column', flex='')
      ui-view
