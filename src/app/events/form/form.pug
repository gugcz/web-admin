md-content(layout-padding)
  form(name='addEventForm', ng-submit='addEventForm.$valid && vm.saveEvent()', novalidate, layout="column")
    div(layout="row")
      md-input-container(flex)
        label(translate='EVENTS.FORM.NAME')
        input(ng-model='vm.event.name', required)

      md-input-container(flex)
        label(translate='EVENTS.FORM.SUBTITLE')
        input(ng-model='vm.event.subtitle')

    div(layout="row")
      md-input-container(flex='50')
        label(translate='EVENTS.FORM.DESCRIPTION')
        textarea(rows='4', ng-model='vm.event.description', required)

      div(flex='50')
        div(rows='4',marked='vm.event.description')

    dates-picker(dates='vm.event.dates')

    venue-selector(venue='vm.event.venue')

    // TODO - Add material design
    input(type='file', name='cover', image-with-preview='', ng-model='vm.event.cover', accept='image/jpeg,image/png', dimensions='')
    span.error(ng-show='addEventForm.cover.$error.image')
      | Not a JPEG or a PNG!
    span.error(ng-show='addEventForm.cover.$error.dimensions')
      | Invalid dimensions! Expecting a landscape image smaller than 1800x400.
    //img(ng-show='vm.event.cover.src', ng-src='{{vm.event.cover.src}}')

    md-input-container
      label(translate='EVENTS.FORM.REGFORM_LINK')
      input(type='url', name="regFormLink", ng-model='vm.event.regFormLink', required)
      // TODO standard translated messages
      div(ng-messages="addEventForm.regFormLink.$error")
        div(ng-message="required") This is required.
        div(ng-message="url") This is not url.

    // TODO Add validations
    orgs-table(selected-chapters='vm.event.chapters', organizers='vm.event.organizers', guarantee='vm.event.guarantee')

    links(links='vm.event.links', context='{{"EVENTS.FORM.EVENT" | translate}}')

    div(layout='row', layout-align='end')
      md-button(class="md-raised", aria-label='Save', type='submit') {{ "BUTTONS.SAVE" | translate}}
      md-button(class="md-raised md-primary", aria-label='Save and publish', ng-click='vm.saveAndPublishEvent()') {{ "BUTTONS.SAVE_AND_PUBLISH" | translate}}

    pre {{ vm.event | json }}
